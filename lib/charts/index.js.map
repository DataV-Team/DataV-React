{"version":3,"file":"index.js","sources":["../../src/components/charts/index.js"],"sourcesContent":["import React, { useRef, useEffect, useMemo } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport classnames from 'classnames'\r\n\r\nimport Chart from '@jiaminghi/charts'\r\n\r\nimport useAutoResize from '../../use/autoResize'\r\n\r\nimport './style.less'\r\n\r\nconst Charts = ({ option = {}, className, style }) => {\r\n  const { width, height, domRef } = useAutoResize()\r\n\r\n  const chartRef = useRef(null)\r\n\r\n  const chartInstanceofRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    chartInstanceofRef.current ||\r\n      (chartInstanceofRef.current = new Chart(chartRef.current))\r\n\r\n    chartInstanceofRef.current.setOption(option || {})\r\n  }, [option])\r\n\r\n  useEffect(() => {\r\n    chartInstanceofRef.current.resize()\r\n  }, [width, height])\r\n\r\n  const classNames = useMemo(\r\n    () => classnames('dv-charts-container', className),\r\n    [className]\r\n  )\r\n\r\n  return (\r\n    <div className={classNames} style={style} ref={domRef}>\r\n      <div className='charts-canvas-container' ref={chartRef} />\r\n    </div>\r\n  )\r\n}\r\n\r\nCharts.propTypes = {\r\n  option: PropTypes.object,\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\n// 指定 props 的默认值：\r\nCharts.defaultProps = {\r\n  option: {}\r\n}\r\n\r\nexport default Charts\r\n"],"names":["Charts","option","className","style","useAutoResize","width","height","domRef","chartRef","useRef","chartInstanceofRef","current","Chart","setOption","resize","classNames","useMemo","classnames","React","propTypes","PropTypes","object","string","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;AAYA,IAAMA,SAAS,SAATA,MAAS,OAAuC;yBAApCC,MAAoC;MAApCA,MAAoC,+BAA3B,EAA2B;MAAvBC,SAAuB,QAAvBA,SAAuB;MAAZC,KAAY,QAAZA,KAAY;;uBAClBC,yBADkB;MAC5CC,KAD4C,kBAC5CA,KAD4C;MACrCC,MADqC,kBACrCA,MADqC;MAC7BC,MAD6B,kBAC7BA,MAD6B;;MAG9CC,WAAWC,aAAO,IAAP,CAAjB;;MAEMC,qBAAqBD,aAAO,IAAP,CAA3B;;kBAEU,YAAM;uBACKE,OAAnB,KACGD,mBAAmBC,OAAnB,GAA6B,IAAIC,eAAJ,CAAUJ,SAASG,OAAnB,CADhC;;uBAGmBA,OAAnB,CAA2BE,SAA3B,CAAqCZ,UAAU,EAA/C;GAJF,EAKG,CAACA,MAAD,CALH;;kBAOU,YAAM;uBACKU,OAAnB,CAA2BG,MAA3B;GADF,EAEG,CAACT,KAAD,EAAQC,MAAR,CAFH;;MAIMS,aAAaC,cACjB;WAAMC,qBAAW,qBAAX,EAAkCf,SAAlC,CAAN;GADiB,EAEjB,CAACA,SAAD,CAFiB,CAAnB;;SAMEgB;;MAAK,WAAWH,UAAhB,EAA4B,OAAOZ,KAAnC,EAA0C,KAAKI,MAA/C;0CACO,WAAU,yBAAf,EAAyC,KAAKC,QAA9C;GAFJ;CAvBF;;AA8BAR,OAAOmB,SAAP,GAAmB;UACTC,oBAAUC,MADD;aAEND,oBAAUE,MAFJ;SAGVF,oBAAUC;;;CAHnB,CAOArB,OAAOuB,YAAP,GAAsB;UACZ;CADV;;;;"}